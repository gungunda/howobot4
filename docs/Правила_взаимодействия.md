# **ПРАВИЛА ВЗАИМОДЕЙСТВИЯ В ПРОЕКТЕ **

Этот документ описывает, как именно мы работаем вместе: как обмениваться кодом, как согласовывать изменения и как поддерживать чистоту и прозрачность проекта.

---

## 1. ОБМЕН КОДОМ

### 1.1. Формат передачи файлов от пользователя к ИИ

ИИ не имеет постоянного доступа к GitHub и не хранит файлы между сессиями, поэтому используется формат **bundle**.

**Bundle** состоит из двух частей:

1. Список файлов между маркерами `FILE_INDEX_START` и `FILE_INDEX_END`.
2. Каждый файл идёт полностью, начиная со строки `// /путь/к/файлу`.

Если ИИ нужны не все файлы, он присылает список нужных путей, например:

```
index.html
css/styles.css
js/ui/view-schedule.js
```

Пользователь присылает частичный бандл только с этими файлами.

**Важно:** ИИ работает только с теми файлами, которые явно присланы. Если чего-то не хватает, он должен запросить недостающие файлы.

### 1.2. Формат передачи от ИИ к пользователю

ИИ не даёт фрагменты кода, а присылает **patch.txt** с полным содержимым всех изменённых файлов.

**Формат patch.txt:**

```
===FILE_START===
PATH: js/ui/events.js
-----8<-----
// полный обновлённый код файла
-----8<-----
===FILE_END===
```

Пользователь скачивает `patch.txt` и применяет его через `apply-patch.cmd`, который автоматически раскладывает файлы.

Это исключает рассинхронизацию между старым и новым кодом.

---

## 2. РОЛИ УЧАСТНИКОВ

- **Пользователь** — владелец проекта и хранитель живой копии кода.
- **ИИ** — инструмент для рефакторинга, исправлений и улучшения архитектуры, но:
  - не имеет доступа к репозиторию;
  - не хранит файлы между чатами;
  - не видит интерфейс, кроме как через описания и логи.

### Цикл отладки

1. Пользователь применяет `patch.txt`.
2. Запускает приложение.
3. Присылает логи консоли (ошибки, `console.log`).
4. ИИ делает следующий патч.

---

## 3. ТЕСТИРОВАНИЕ

После каждого изменения:

- проверяем консоль в Chrome DevTools → Console;
- если есть `SyntaxError` или `Uncaught TypeError`, пользователь сразу присылает стек ошибок;
- фиксация успешных проверок может быть помечена коротким комментарием «тест пройден».

---

## 4. СТАНДАРТЫ КОДА И ОБЪЯСНЕНИЙ

Проект рассчитан на **начинающего разработчика (junior / студент)**.

### Требования к стилю

- Спокойный, наставнический тон; можно обращаться на «ты».
- Термины сразу объясняются простыми словами.\
  *Пример:* «асинхронная функция — это функция, которая не блокирует весь остальной код во время ожидания ответа».
- Код максимально читабельный: переносы, короткие комментарии, отсутствие «магии» без пояснений.
- Без избыточной теории. Если тема сложная — дать базовое объяснение и отметить: «об этом подробнее позже».
- Поддерживать уверенность пользователя: «это нормальная сложность на твоём уровне».
- В объяснениях идти по шагам: что делает строка, зачем нужна, как работает.

---

## 5. ОГРАНИЧЕНИЕ ИНИЦИАТИВЫ

*(Это правило распространяется не только на код, но и на структуру комментариев, названий переменных и описаний — чтобы не возникало рассинхронизации между документацией и логикой проекта.)*

### Основные принципы

1. ИИ **не изменяет** код без прямого запроса.

   - Никаких «заодно переписал половину файла».
   - Никаких «почистил комментарии».
   - Никаких скрытых архитектурных миграций.

2. Если требуется рефакторинг, переименование, перенос логики — ИИ обязан:

   - **предложить** это заранее;
   - объяснить, зачем;
   - дождаться явного согласия пользователя.

3. После согласия — ИИ присылает `patch.txt`.

4. Если пользователь просит «починить дизейбл чекбокса» — ИИ трогает только нужное место, не переписывает файл целиком.

5. Без разрешения нельзя добавлять новые модули, константы, вспомогательные слои и т.д.

6. Нельзя плодить альтернативные версии логики (две функции с разными именами, два файла со схожей логикой).\
   В проекте должно быть **одно место правды** на каждую вещь.

---

## 6. ПРАВИЛО ПЛАНА И ОТЧЁТА ОБ ОТКЛОНЕНИЯХ

Перед любыми изменениями ИИ обязан:

1. Составить и прислать **План изменений**, где указано:

   - какие файлы затронуты;
   - какие функции или блоки кода изменяются;
   - цель и суть правок.

2. После одобрения плана — действовать строго в его рамках.

3. Если в процессе требуется выйти за рамки плана (например, затронуть больше функций или файлов), ИИ:

   - завершает реализацию исходного плана;
   - **жирно пишет**: «**ОТОШЁЛ ОТ ПЛАНА**»;
   - перечисляет, какие отклонения сделаны и почему.

Это гарантирует прозрачность и контроль качества, исключает скрытые «заплатки» и дублирование логики.

---

## 7. ИТОГ

Эти правила фиксируют понятный рабочий процесс:

- обмен кодом — через bundle и patch.txt;
- коммуникация — через чёткие планы и подтверждения;
- результат — чистый, прозрачный и согласованный проект.

